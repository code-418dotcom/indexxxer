"use strict";(()=>{var e={};e.id=392,e.ids=[392],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4734:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>u});var a={};r.r(a),r.d(a,{GET:()=>i});var n=r(3278),s=r(5002),o=r(4877),p=r(1309);async function i(e){let t=new URL(e.url).searchParams.get("rel_path");if(!t)return p.NextResponse.json({error:"Missing rel_path"},{status:400});let r=new URL(`/media/stream?rel_path=${encodeURIComponent(t)}`,process.env.API_INTERNAL_BASE||"http://api:8000"),a=await fetch(r.toString(),{headers:{Range:e.headers.get("range")||""}}),n=new Headers;return a.headers.get("content-type")&&n.set("content-type",a.headers.get("content-type")),a.headers.get("content-length")&&n.set("content-length",a.headers.get("content-length")),a.headers.get("content-range")&&n.set("content-range",a.headers.get("content-range")),a.headers.get("accept-ranges")&&n.set("accept-ranges",a.headers.get("accept-ranges")),n.set("Cache-Control","public, max-age=3600"),new p.NextResponse(a.body,{status:a.status,headers:n})}let d=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/media/stream/route",pathname:"/api/media/stream",filename:"route",bundlePath:"app/api/media/stream/route"},resolvedPagePath:"/home/project/frontend/app/api/media/stream/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:u,serverHooks:g}=d,h="/api/media/stream/route";function m(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:u})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[787,833],()=>r(4734));module.exports=a})();