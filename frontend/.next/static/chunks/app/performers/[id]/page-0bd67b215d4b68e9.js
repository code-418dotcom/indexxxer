(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[157],{5722:function(e,t,i){Promise.resolve().then(i.bind(i,6012))},6012:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var r=i(7437),o=i(2265),a=i(9376),n=i(125);function s(e){let{params:t}=e;(0,a.useRouter)();let[i,s]=(0,o.useState)(null),[l,d]=(0,o.useState)([]),[c,p]=(0,o.useState)([]),[h,u]=(0,o.useState)(""),[g,x]=(0,o.useState)(null);(0,o.useEffect)(()=>{let e=!1;return(async()=>{u("");try{let i=await fetch("/api/performers/".concat(t.id),{cache:"no-store"});if(!i.ok)throw Error(await i.text());let r=await i.json();if(e)return;s(r);let o=await fetch("/api/performers/".concat(t.id,"/media"),{cache:"no-store"});if(o.ok){let t=await o.json();if(e)return;p(Array.isArray(t)?t:[])}let a=await fetch("/api/media/items?limit=500&offset=0",{cache:"no-store"});if(a.ok){let t=await a.json();if(e)return;d(Array.isArray(t)?t:[])}}catch(t){if(e)return;u((null==t?void 0:t.message)||String(t))}})(),()=>{e=!0}},[t.id]);let f=(0,o.useMemo)(()=>{if(c&&c.length)return c.map(e=>({...e.media||{},confidence:e.confidence,matched_by:e.matched_by}));if(!(null==i?void 0:i.name))return[];let e=String(i.name).toLowerCase(),t=e.split(" ")[0]||e;return l.filter(e=>String(e.rel_path||"").toLowerCase().includes(t)).slice(0,60)},[l,i,c]);return(0,r.jsxs)("main",{style:{padding:24,maxWidth:1200,margin:"0 auto"},children:[(0,r.jsx)("a",{href:"/",style:{textDecoration:"none",color:"black",opacity:.75},children:"← Back"}),h?(0,r.jsx)("div",{style:{marginTop:12,padding:12,border:"1px solid rgba(255,0,0,0.25)",background:"rgba(255,0,0,0.05)",borderRadius:12,whiteSpace:"pre-wrap"},children:h}):null,i?(0,r.jsxs)("div",{style:{marginTop:16},children:[(0,r.jsx)(n.Z,{p:i,variant:"detail"}),(0,r.jsx)("h2",{style:{marginTop:24},children:"Indexed files (best-effort match)"}),(0,r.jsxs)("div",{style:{opacity:.7,fontSize:13,marginBottom:10},children:["Thumbnails are generated by the API using ",(0,r.jsx)("code",{children:"ffmpeg"})," for videos and cached."]}),f.length?(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:14},children:f.map(e=>(0,r.jsxs)("div",{style:{border:"none",borderRadius:16,overflow:"hidden",background:"white",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",transition:"all 0.2s",cursor:"video"===e.kind?"pointer":"default"},onClick:()=>{"video"===e.kind&&x(e.rel_path)},onMouseEnter:t=>{"video"===e.kind&&(t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 4px 20px rgba(0,0,0,0.12)")},onMouseLeave:t=>{"video"===e.kind&&(t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="0 2px 12px rgba(0,0,0,0.08)")},children:[(0,r.jsxs)("div",{style:{aspectRatio:"16/10",background:"linear-gradient(135deg, rgba(0,0,0,0.03), rgba(0,0,0,0.06))",position:"relative",display:"grid",placeItems:"center"},children:[(0,r.jsx)("img",{src:"/api/media/thumb?rel_path=".concat(encodeURIComponent(e.rel_path)),alt:e.rel_path,style:{width:"100%",height:"100%",objectFit:"cover"},onError:e=>{e.currentTarget.style.display="none"}}),"video"===e.kind&&(0,r.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:48,height:48,borderRadius:"50%",background:"rgba(102, 126, 234, 0.9)",display:"grid",placeItems:"center",color:"white",fontSize:20},children:"▶"}),(0,r.jsx)("div",{style:{position:"absolute",bottom:8,right:8,fontSize:10,padding:"4px 8px",borderRadius:8,background:"rgba(0,0,0,0.75)",color:"white",fontWeight:600,textTransform:"uppercase"},children:e.kind})]}),(0,r.jsx)("div",{style:{padding:12,fontSize:11,fontFamily:"ui-monospace, SFMono-Regular",opacity:.7,wordBreak:"break-word",lineHeight:1.4},children:e.rel_path.split("/").pop()})]},e.id))}):(0,r.jsxs)("div",{style:{padding:24,opacity:.6,fontSize:14,border:"2px dashed rgba(0,0,0,0.1)",borderRadius:16,textAlign:"center"},children:["No matches yet. Use ",(0,r.jsx)("b",{children:"Tools → Index now"})," to build the media index."]}),g&&(0,r.jsx)("div",{onClick:()=>x(null),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.9)",display:"grid",placeItems:"center",padding:24,zIndex:9999,cursor:"pointer"},children:(0,r.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{position:"relative",maxWidth:"90vw",maxHeight:"90vh",borderRadius:16,overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",cursor:"default"},children:[(0,r.jsx)("button",{onClick:()=>x(null),style:{position:"absolute",top:16,right:16,width:40,height:40,borderRadius:"50%",border:"none",background:"rgba(0,0,0,0.7)",color:"white",fontSize:20,cursor:"pointer",zIndex:10},children:"✕"}),(0,r.jsx)("video",{src:"/api/media/stream?rel_path=".concat(encodeURIComponent(g)),controls:!0,autoPlay:!0,style:{maxWidth:"90vw",maxHeight:"90vh",display:"block"}})]})})]}):(0,r.jsx)("div",{style:{marginTop:16,opacity:.7},children:"Loading…"})]})}},125:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});var r=i(7437),o=i(2265);let a={Name:"name",Aliases:"aliases","Date of birth":"date_of_birth",Age:"age","Career status":"career_status","Career start":"career_start","Career end":"career_end","Date of death":"date_of_death","Place of birth":"place_of_birth",Ethnicity:"ethnicity",Boobs:"boobs",Bust:"bust",Cup:"cup",Bra:"bra",Waist:"waist",Hip:"hip",Butt:"butt",Height:"height",Weight:"weight","Hair Color":"hair_color","Eye Color":"eye_color",Piercings:"piercings","Piercing locations":"piercing_locations",Tattoos:"tattoos","Tattoo locations":"tattoo_locations"};function n(e){let{k:t,v:i}=e;if(null==i||""===i)return null;let o=a[t]||String(t).toLowerCase().replace(/\s+/g,"_"),n=String(i),s="/?fkey=".concat(encodeURIComponent(o),"&fval=").concat(encodeURIComponent(n));return(0,r.jsxs)("div",{style:{display:"flex",gap:8,fontSize:13,lineHeight:1.4,cursor:"default",userSelect:"none"},children:[(0,r.jsx)("div",{style:{width:160,opacity:.7},children:t}),(0,r.jsx)("a",{href:s,title:"Filter by this value",style:{flex:1,wordBreak:"break-word",color:"inherit",textDecoration:"underline",textUnderlineOffset:3,cursor:"pointer",opacity:.95},children:n})]})}function s(e){var t;let{p:i,variant:a="grid"}=e,[s,l]=o.useState(!0),[d,c]=o.useState(!1),[p,h]=o.useState(""),u="/api/performers/".concat(i.id,"/image"),g="/api/performers/".concat(i.id,"/thumb?size=480"),x="/api/performers/".concat(i.id,"/thumb?size=1200"),f=null===(t=i.aliases)||void 0===t?void 0:t.split("|").map(e=>e.trim()).filter(Boolean),b="number"==typeof i.scene_count?i.scene_count:void 0,y="number"==typeof i.gallery_count?i.gallery_count:void 0,m="detail"===a;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("a",{href:"/performers/".concat(i.id),style:{display:"block",color:"inherit",textDecoration:"none"},onClick:e=>{m&&e.preventDefault()},children:(0,r.jsx)("div",{style:{border:"1px solid rgba(0,0,0,0.1)",borderRadius:16,padding:16,boxShadow:"0 6px 18px rgba(0,0,0,0.06)",background:"white"},children:(0,r.jsxs)("div",{style:{display:"flex",gap:16,alignItems:m?"flex-start":"stretch"},children:[(0,r.jsx)("div",{role:m?"img":"button",onClick:e=>{!m&&(e.preventDefault(),e.stopPropagation(),s&&(h(u),c(!0)))},title:m?"":s?"Open image":"No image",style:{...m?{width:"min(520px, 100%)",borderRadius:16,overflow:"hidden",background:"rgba(0,0,0,0.04)",flexShrink:0}:{width:120,height:160,borderRadius:14,overflow:"hidden",background:"rgba(0,0,0,0.04)",flexShrink:0},cursor:!m&&s?"zoom-in":"default"},children:s?(0,r.jsx)("img",{src:m?x:g,alt:i.name,style:{width:"100%",height:m?"auto":"100%",objectFit:m?"contain":"cover",display:"block",background:"rgba(0,0,0,0.02)"},onError:()=>l(!1)}):(0,r.jsx)("div",{style:{width:"100%",height:m?320:"100%",display:"grid",placeItems:"center",opacity:.6},children:"No image"})}),(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:12},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontSize:20,fontWeight:800},children:i.name}),(null==f?void 0:f.length)?(0,r.jsxs)("div",{style:{marginTop:4,fontSize:13,opacity:.75},children:["Aliases: ",f.join(", ")]}):null]}),(0,r.jsxs)("div",{style:{fontSize:12,opacity:.6,whiteSpace:"nowrap"},children:["#",i.id]})]}),void 0!==b||void 0!==y?(0,r.jsxs)("div",{style:{marginTop:8,display:"flex",gap:8,flexWrap:"wrap"},children:[void 0!==b?(0,r.jsxs)("span",{style:{fontSize:12,padding:"3px 8px",border:"1px solid rgba(0,0,0,0.12)",borderRadius:999,opacity:.85},children:["Scenes: ",b]}):null,void 0!==y?(0,r.jsxs)("span",{style:{fontSize:12,padding:"3px 8px",border:"1px solid rgba(0,0,0,0.12)",borderRadius:999,opacity:.85},children:["Galleries: ",y]}):null]}):null,(0,r.jsxs)("div",{style:{marginTop:12,display:"grid",gap:6},children:[(0,r.jsx)(n,{k:"Date of birth",v:i.date_of_birth}),(0,r.jsx)(n,{k:"Age",v:i.age}),(0,r.jsx)(n,{k:"Career status",v:i.career_status}),(0,r.jsx)(n,{k:"Career start",v:i.career_start}),(0,r.jsx)(n,{k:"Career end",v:i.career_end}),(0,r.jsx)(n,{k:"Place of birth",v:i.place_of_birth}),(0,r.jsx)(n,{k:"Ethnicity",v:i.ethnicity}),(0,r.jsx)(n,{k:"Boobs",v:i.boobs}),(0,r.jsx)(n,{k:"Bust",v:i.bust}),(0,r.jsx)(n,{k:"Cup",v:i.cup}),(0,r.jsx)(n,{k:"Bra",v:i.bra}),(0,r.jsx)(n,{k:"Waist",v:i.waist}),(0,r.jsx)(n,{k:"Hip",v:i.hip}),(0,r.jsx)(n,{k:"Butt",v:i.butt}),(0,r.jsx)(n,{k:"Height",v:i.height}),(0,r.jsx)(n,{k:"Weight",v:i.weight}),(0,r.jsx)(n,{k:"Hair Color",v:i.hair_color}),(0,r.jsx)(n,{k:"Eye Color",v:i.eye_color}),(0,r.jsx)(n,{k:"Piercings",v:i.piercings}),(0,r.jsx)(n,{k:"Piercing locations",v:i.piercing_locations}),(0,r.jsx)(n,{k:"Tattoos",v:i.tattoos}),(0,r.jsx)(n,{k:"Tattoo locations",v:i.tattoo_locations}),(0,r.jsx)(n,{k:"Date of death",v:i.date_of_death})]})]})]})})}),d?(0,r.jsx)("div",{onClick:()=>c(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",display:"grid",placeItems:"center",padding:24,zIndex:9999,cursor:"zoom-out"},children:(0,r.jsx)("img",{src:p||u,alt:i.name,style:{maxWidth:"min(1200px, 95vw)",maxHeight:"92vh",borderRadius:16,boxShadow:"0 18px 60px rgba(0,0,0,0.35)",background:"white"},onClick:e=>e.stopPropagation()})}):null]})}},9376:function(e,t,i){"use strict";var r=i(5475);i.o(r,"useRouter")&&i.d(t,{useRouter:function(){return r.useRouter}}),i.o(r,"useSearchParams")&&i.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=5722)}),_N_E=e.O()}]);